{
  "ticket": "cfg03-config-migration",
  "title": "Configuration Migration",
  "priority": 2,
  "status": "skipped",
  "skipped_reason": "Product not yet released, no legacy users to migrate",
  "dependencies": ["cfg01-platform-paths", "cfg02-secure-credentials"],
  "parallelizable": false,
  "features": [
    {
      "id": "F001",
      "category": "functional",
      "description": "checkNeedsMigration() detects legacy config",
      "steps": [
        "Create test ~/.skilluse/config.json with sample data",
        "Call checkNeedsMigration()",
        "Verify returns true when legacy exists and new does not",
        "Verify returns false when new config exists"
      ],
      "passes": false
    },
    {
      "id": "F002",
      "category": "functional",
      "description": "runMigration() moves repos and installed skills to new location",
      "steps": [
        "Create legacy config with repos and installed arrays",
        "Call runMigration()",
        "Verify new config.json contains repos array",
        "Verify new config.json contains installed array"
      ],
      "passes": false
    },
    {
      "id": "F003",
      "category": "functional",
      "description": "runMigration() moves auth to secure storage",
      "steps": [
        "Create legacy config with auth token",
        "Call runMigration()",
        "Verify token stored in keychain via getCredentials()",
        "Verify new config.json does NOT contain auth"
      ],
      "passes": false
    },
    {
      "id": "F004",
      "category": "functional",
      "description": "Migration creates marker file to prevent re-migration",
      "steps": [
        "Run migration successfully",
        "Verify .migrated marker exists in new config directory",
        "Call checkNeedsMigration() again",
        "Verify returns false"
      ],
      "passes": false
    },
    {
      "id": "F005",
      "category": "functional",
      "description": "cleanupLegacyConfig() removes ~/.skilluse directory",
      "steps": [
        "Ensure ~/.skilluse exists",
        "Call cleanupLegacyConfig()",
        "Verify ~/.skilluse directory removed"
      ],
      "passes": false
    },
    {
      "id": "F006",
      "category": "functional",
      "description": "Store initialization triggers migration check",
      "steps": [
        "Create legacy config",
        "Import store service (triggers initialization)",
        "Verify migration ran automatically",
        "Verify config accessible via getConfig()"
      ],
      "passes": false
    },
    {
      "id": "F007",
      "category": "non-functional",
      "description": "TypeScript compiles without errors",
      "steps": [
        "Run pnpm build in packages/cli",
        "Verify no TypeScript errors"
      ],
      "passes": false
    }
  ],
  "completed_at": null
}
