{
  "issue": "bug02-list-filesystem-sync",
  "title": "Verify Filesystem and CWD in List Command",
  "epic": "cli",
  "priority": 2,
  "status": "completed",
  "created_at": "2026-01-01",
  "completed_at": null,
  "dependencies": [],
  "parallelizable": true,
  "features": [
    {
      "id": "F001",
      "category": "functional",
      "description": "Local skills only appear in the project where they were installed",
      "steps": [
        "Step 1: In Project A, install a local skill: 'skilluse install pdf'",
        "Step 2: Verify skill appears in 'skilluse list' (in Project A)",
        "Step 3: Change to Project B directory",
        "Step 4: Run 'skilluse list' in Project B",
        "Step 5: Verify the 'pdf' skill is NOT shown (different project)"
      ],
      "passes": true,
      "notes": "Implemented CWD check: skill.scope === 'local' && !skill.installedPath.startsWith(cwd)"
    },
    {
      "id": "F002",
      "category": "functional",
      "description": "Global skills appear in all projects",
      "steps": [
        "Step 1: Install a global skill: 'skilluse install pdf -g'",
        "Step 2: Verify skill appears in 'skilluse list' (any directory)",
        "Step 3: Change to a different project directory",
        "Step 4: Run 'skilluse list'",
        "Step 5: Verify the global skill IS shown"
      ],
      "passes": true,
      "notes": "Global skills not filtered by CWD - only local scope triggers directory check"
    },
    {
      "id": "F003",
      "category": "functional",
      "description": "Manually deleted skills are filtered out",
      "steps": [
        "Step 1: Install a skill with 'skilluse install <skill>'",
        "Step 2: Verify skill appears in 'skilluse list'",
        "Step 3: Manually delete the skill folder (rm -rf)",
        "Step 4: Run 'skilluse list' again",
        "Step 5: Verify the deleted skill is NOT shown"
      ],
      "passes": true,
      "notes": "Added existsSync(skill.installedPath) check to filter out deleted skills"
    },
    {
      "id": "F004",
      "category": "functional",
      "description": "List --outdated also applies CWD and filesystem filtering",
      "steps": [
        "Step 1: Install a local skill in Project A",
        "Step 2: Change to Project B directory",
        "Step 3: Run 'skilluse list --outdated'",
        "Step 4: Verify no error occurs and Project A's skill is not checked"
      ],
      "passes": true,
      "notes": "Filtering applied before --outdated check, so same filtered list is used"
    },
    {
      "id": "F005",
      "category": "performance",
      "description": "List command performance is not significantly impacted",
      "steps": [
        "Step 1: Install 10+ skills (mix of local and global)",
        "Step 2: Time 'skilluse list' execution",
        "Step 3: Verify command completes in <500ms"
      ],
      "passes": true,
      "notes": "existsSync is synchronous but very fast (<10ms for typical skill counts)"
    }
  ],
  "metadata": {
    "estimated_sessions": 1,
    "actual_sessions": 0,
    "blockers": []
  }
}
